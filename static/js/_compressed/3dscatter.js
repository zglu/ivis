$(function(){$("#makeChart").click(function(){if(""==$("textarea[name=usrcsv]").val())alert("You need to enter the data!");else var t=$("textarea[name=usrcsv]").val().replace(/[ \t]+/g,",");if(""==$("input[name=mtitle]").val())e="3D Scatter";else var e=$("input[name=mtitle]").val();if(""==$("input[name=pcolor]").val())var a="",n=!0;else var a=$("input[name=pcolor]").val(),n=!1;if(""==$("input[name=xaxis]").val())i="X";else var i=$("input[name=xaxis]").val();if(""==$("input[name=yaxis]").val())o="Y";else var o=$("input[name=yaxis]").val();if(""==$("input[name=zaxis]").val())r="Z";else var r=$("input[name=zaxis]").val();if(""==$("input[name=preurl]").val())s="https://scholar.google.com/scholar?hl=en&q=";else var s=$("input[name=preurl]").val();if($("#select-datalebels").is(":checked"))l=!0;else var l=!1;var c=new Highcharts.chart({chart:{renderTo:"container",type:"scatter",options3d:{enabled:!0,alpha:10,beta:30,depth:250,viewDistance:5,fitToPlot:!1}},xAxis:{title:{text:i}},yAxis:{title:{text:o},labels:{format:"{value}"}},zAxis:{title:{text:r}},data:{csv:t,seriesMapping:[{x:1,y:2,z:3,name:0}]},plotOptions:{scatter:{dataLabels:{enabled:l,format:"{point.name}"},marker:{radius:3,fillColor:a,symbol:"circle"},cursor:"pointer",point:{events:{click:function(){var t=s+this.options.name;window.open(t)}}},turboThreshold:0}},title:{text:e},legend:{enabled:!1},credits:{enabled:!1},series:[{colorByPoint:n}],tooltip:{formatter:function(){return this.point.name+"<br/>"+i+": "+Highcharts.numberFormat(this.point.x,2)+"<br>"+o+": "+Highcharts.numberFormat(this.point.y,2)+"<br>"+r+": "+Highcharts.numberFormat(this.point.z,2)}}});$(c.container).on("mousedown.hc touchstart.hc",function(t){var e,a,n=(t=c.pointer.normalize(t)).pageX,i=t.pageY,o=c.options.chart.options3d.alpha,r=c.options.chart.options3d.beta;$(document).on({"mousemove.hc touchdrag.hc":function(t){a=r+(n-t.pageX)/5,c.options.chart.options3d.beta=a,e=o+(t.pageY-i)/5,c.options.chart.options3d.alpha=e,c.redraw(!1)},"mouseup touchend":function(){$(document).off(".hc")}})})})});
