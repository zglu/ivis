$("#exportHtml").click(function(){if(""==$("textarea[name=usrcsv]").val())alert("You need to enter the data!");else{var t=$("textarea[name=usrcsv]").val().replace(/[ \t]+/g,","),e=Math.random().toString(36).substr(2,6),a=Math.random().toString(36).substr(2,5);if(""==$("input[name=mtitle]").val())n="3D Scatter";else var n=$("input[name=mtitle]").val();if(""==$("input[name=pcolor]").val())var r="",i=!0;else var r=$("input[name=pcolor]").val(),i=!1;if(""==$("input[name=xaxis]").val())o="X";else var o=$("input[name=xaxis]").val();if(""==$("input[name=yaxis]").val())s="Y";else var s=$("input[name=yaxis]").val();if(""==$("input[name=zaxis]").val())l="Z";else var l=$("input[name=zaxis]").val();if(""==$("input[name=preurl]").val())c="https://scholar.google.com/scholar?hl=en&q=";else var c=$("input[name=preurl]").val();if($("#select-datalebels").is(":checked"))p=!0;else var p=!1;var h='<pre id="'+a+'" style="display:none;">\n'+t+'\n</pre>\n<div id="'+e+'"></div>\n<script>\n$(function(){var t=$("#'+a+'").html().replace(/[ \t]+/g,",");var chart=new Highcharts.chart({chart:{renderTo:"'+e+'",type:"scatter",options3d:{enabled:!0,alpha:10,beta:30,depth:250,viewDistance:5,fitToPlot:!1}},xAxis:{title:{text:"'+o+'"}},yAxis:{title:{text:"'+s+'"},labels:{format:"{value}"}},zAxis:{title:{text:"'+l+'"}},data:{csv:t,seriesMapping:[{x:1,y:2,z:3,name:0}]},plotOptions:{scatter:{dataLabels:{enabled:'+p+',format:"{point.name}"},marker:{radius:3,fillColor:"'+r+'",symbol:"circle"},cursor:"pointer",point:{events:{click:function(){var l="'+c+'"+this.options.name;window.open(l)}}},turboThreshold:0}},title:{text:"'+n+'"},legend:{enabled:!1},credits:{enabled:!1},series:[{colorByPoint:'+i+'}],tooltip:{formatter:function(){return this.point.name+"<br/>'+o+': "+Highcharts.numberFormat(this.point.x,2)+"<br>'+s+': "+Highcharts.numberFormat(this.point.y,2)+"<br>'+l+': "+Highcharts.numberFormat(this.point.z,2)}}});$(chart.container).on("mousedown.hc touchstart.hc",function(t){var e,o,a=(t=chart.pointer.normalize(t)).pageX,r=t.pageY,i=chart.options.chart.options3d.alpha,n=chart.options.chart.options3d.beta;$(document).on({"mousemove.hc touchdrag.hc":function(t){o=n+(a-t.pageX)/5,chart.options.chart.options3d.beta=o,e=i+(t.pageY-r)/5,chart.options.chart.options3d.alpha=e,chart.redraw(!1)},"mouseup touchend":function(){$(document).off(".hc")}})})});<\/script>';alert(h)}});
